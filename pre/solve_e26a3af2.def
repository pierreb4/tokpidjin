def solve_e26a3af2(S, I):
    return branch(greater(compose(size, dedupe)(apply(rbind(get_common_rank, F0), mir_rot_t(I, R4))), compose(size, dedupe)(apply(rbind(get_common_rank, F0), I))), vupscale, hupscale)(branch(greater(compose(size, dedupe)(apply(rbind(get_common_rank, F0), mir_rot_t(I, R4))), compose(size, dedupe)(apply(rbind(get_common_rank, F0), I))), repeat(apply(rbind(get_common_rank, F0), mir_rot_t(I, R4)), ONE), mir_rot_t(repeat(apply(rbind(get_common_rank, F0), I), ONE), R4)), branch(greater(compose(size, dedupe)(apply(rbind(get_common_rank, F0), mir_rot_t(I, R4))), compose(size, dedupe)(apply(rbind(get_common_rank, F0), I))), height_t, width_t)(I))
