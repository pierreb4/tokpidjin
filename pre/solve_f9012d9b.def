def solve_f9012d9b(S, I):
    return subgrid(f_ofcolor(I, ZERO), paint(I, mapply(lbind(shift, mfilter_f(o_g(I, R4), chain(flip, lbind(contained, ZERO), palette_t))), apply(rbind(multiply, astuple(vperiod(asobject(extract(vsplit(I, TWO), chain(flip, lbind(contained, ZERO), palette_t)))), hperiod(asobject(extract(hsplit(I, TWO), chain(flip, lbind(contained, ZERO), palette_t)))))), mapply(neighbors, neighbors(ORIGIN))))))
