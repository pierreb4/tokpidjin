def solve_d22278a0(S, I):
    return paint(I, mapply(fork(recolor_i, color, fork(intersection, fork(intersection, chain(lbind(sfilter, asindices(I)), lbind(compose, compose(chain(even, rbind(get_rank, F0), lbind(apply, fork(multiply, sign, identity))), fork(subtract, rbind(get_nth_f, F0), compose(center, rbind(get_nth_f, L1))))), lbind(rbind, astuple)), chain(lbind(sfilter, asindices(I)), rbind(compose, compose(lbind(rbind(get_arg_rank, L1), o_g(I, R5)), compose(lbind(compose, chain(fork(add, rbind(get_nth_f, F0), rbind(get_nth_f, L1)), lbind(apply, fork(multiply, sign, identity)), fork(subtract, rbind(get_nth_f, F0), compose(center, rbind(get_nth_f, L1))))), lbind(lbind, astuple)))), lbind(rbind, equality))), compose(lbind(sfilter, asindices(I)), fork(lbind(fork, greater), chain(rbind(compose, compose(lbind(compose, chain(fork(add, rbind(get_nth_f, F0), rbind(get_nth_f, L1)), lbind(apply, fork(multiply, sign, identity)), fork(subtract, rbind(get_nth_f, F0), compose(center, rbind(get_nth_f, L1))))), lbind(lbind, astuple))), lbind(lbind, rbind(get_val_rank, L1)), rbind(remove, o_g(I, R5))), compose(lbind(compose, chain(fork(add, rbind(get_nth_f, F0), rbind(get_nth_f, L1)), lbind(apply, fork(multiply, sign, identity)), fork(subtract, rbind(get_nth_f, F0), compose(center, rbind(get_nth_f, L1))))), lbind(rbind, astuple)))))), o_g(I, R5)))
